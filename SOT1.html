<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Risk Tolerance & Position Sizing Calculator</title>
  <style>
    :root {
      --primary: #0a2540;
      --secondary: #335d92;
      --background: #f4f7fc;
      --card-bg: #ffffff;
      --border-color: #e0e6ed;
      --accent: #1d4ed8;
      --text: #333333;
      --warning-bg: #fffbeb;
      --warning-border: #facc15;
      --warning-text: #92400e;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 20px;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--background);
      color: var(--text);
    }
    h1 {
      margin-top: 0;
      color: var(--primary);
    }
    .section {
      margin-bottom: 24px;
      padding: 20px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
    }
    label {
      display: block;
      margin: 12px 0 4px;
      font-weight: 600;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      font-size: 14px;
      background-color: #fafafa;
      transition: border 0.2s;
    }
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
    }
    .result {
      margin-top: 10px;
      padding: 10px;
      background: #f0f4fa;
      border-radius: 4px;
      font-size: 14px;
    }
    .hidden {
      display: none;
    }
    .disclaimer {
      margin-top: 30px;
      padding: 12px;
      background-color: var(--warning-bg);
      border-left: 4px solid var(--warning-border);
      color: var(--warning-text);
      font-size: 13px;
    }
  </style>
</head>
<body>
<h1>Risk Tolerance & Position Sizing</h1>

<div class="section">
  <h3>Step 1: Define your risk unit</h3>
  <label for="riskUnit">Maximum loss per trade (Risk Unit)</label>
  <input type="number" id="riskUnit" placeholder="e.g. 1000" min="0" step="0.01">

  <label for="portfolioSize">Portfolio size</label>
  <input type="number" id="portfolioSize" placeholder="e.g. 50000" min="0" step="0.01">

  <label for="numTrades">Number of concurrent trades</label>
  <input type="number" id="numTrades" placeholder="e.g. 5" min="1" step="1">

  <div id="riskInfo" class="result"></div>
</div>

<div class="section">
  <h3>Step 2: Position sizing calculator</h3>
  <label for="tradeType">Trade type</label>
  <select id="tradeType">
    <option value="">Select a trade type</option>
    <option value="stock">Stock</option>
    <option value="longOption">Long call/put</option>
    <option value="spread">Vertical spread</option>
    <option value="condor">Iron condor</option>
  </select>

  <div id="stockParams" class="hidden">
    <label for="stockEntry">Stock entry price</label>
    <input type="number" id="stockEntry" step="0.01" min="0">
    <label for="stockStop">Stop-loss price</label>
    <input type="number" id="stockStop" step="0.01" min="0">
  </div>

  <div id="longOptionParams" class="hidden">
    <label for="optionPremium">Option premium per contract</label>
    <input type="number" id="optionPremium" step="0.01" min="0">
  </div>

  <div id="spreadParams" class="hidden">
    <label for="spreadMaxLoss">Max loss per spread</label>
    <input type="number" id="spreadMaxLoss" step="0.01" min="0">
  </div>

  <div id="condorParams" class="hidden">
    <label for="condorMaxLoss">Max loss per iron condor</label>
    <input type="number" id="condorMaxLoss" step="0.01" min="0">
  </div>

  <div id="positionResult" class="result"></div>
</div>

<div class="disclaimer">
  ⚠️ Disclaimer: This calculator is for educational purposes only by ~ Strategic Options Trader.
  Always conduct your own research and/or consult with a financial advisor.
</div>

<script>
  // Grab elements
  const riskUnitEl = document.getElementById('riskUnit');
  const portfolioSizeEl = document.getElementById('portfolioSize');
  const numTradesEl = document.getElementById('numTrades');
  const riskInfoEl = document.getElementById('riskInfo');

  const tradeTypeEl = document.getElementById('tradeType');
  const stockParams = document.getElementById('stockParams');
  const longOptionParams = document.getElementById('longOptionParams');
  const spreadParams = document.getElementById('spreadParams');
  const condorParams = document.getElementById('condorParams');
  const positionResultEl = document.getElementById('positionResult');

  // Update risk info when inputs change
  [riskUnitEl, portfolioSizeEl, numTradesEl].forEach(el =>
    el.addEventListener('input', updateRiskInfo)
  );

  tradeTypeEl.addEventListener('change', handleTradeTypeChange);
  document.getElementById('stockEntry').addEventListener('input', updatePositionSize);
  document.getElementById('stockStop').addEventListener('input', updatePositionSize);
  document.getElementById('optionPremium').addEventListener('input', updatePositionSize);
  document.getElementById('spreadMaxLoss').addEventListener('input', updatePositionSize);
  document.getElementById('condorMaxLoss').addEventListener('input', updatePositionSize);

  function updateRiskInfo() {
    const RU = parseFloat(riskUnitEl.value);
    const portfolio = parseFloat(portfolioSizeEl.value);
    const trades = parseInt(numTradesEl.value, 10);

    if (RU > 0 && portfolio > 0 && trades > 0) {
      const riskPct = (RU / portfolio) * 100;
      const drawdownPct = ((RU * trades) / portfolio) * 100;
      let category = '';
      if (riskPct < 0.5) category = 'Very conservative';
      else if (riskPct < 1) category = 'Conservative';
      else if (riskPct < 2) category = 'Moderate';
      else if (riskPct < 3) category = 'Active retail';
      else category = 'Aggressive';

      riskInfoEl.innerHTML =
        `<strong>Risk per trade:</strong> ${riskPct.toFixed(2)}%<br>` +
        `<strong>Max theoretical drawdown:</strong> ${drawdownPct.toFixed(2)}%<br>` +
        `<strong>Profile:</strong> ${category}`;
    } else {
      riskInfoEl.innerHTML = '';
    }
    updatePositionSize();
  }

  function handleTradeTypeChange() {
    stockParams.classList.add('hidden');
    longOptionParams.classList.add('hidden');
    spreadParams.classList.add('hidden');
    condorParams.classList.add('hidden');
    positionResultEl.textContent = '';
    const type = tradeTypeEl.value;
    if (type === 'stock') {
      stockParams.classList.remove('hidden');
    } else if (type === 'longOption') {
      longOptionParams.classList.remove('hidden');
    } else if (type === 'spread') {
      spreadParams.classList.remove('hidden');
    } else if (type === 'condor') {
      condorParams.classList.remove('hidden');
    }
  }

  function updatePositionSize() {
    const RU = parseFloat(riskUnitEl.value);
    const type = tradeTypeEl.value;
    if (!RU || !type) {
      positionResultEl.textContent = '';
      return;
    }

    let result = '';
    if (type === 'stock') {
      const entry = parseFloat(document.getElementById('stockEntry').value);
      const stop = parseFloat(document.getElementById('stockStop').value);
      if (entry > 0 && stop >= 0 && entry > stop) {
        const riskPerShare = entry - stop;
        const shares = Math.floor(RU / riskPerShare);
        result = `You can buy up to ${shares} share(s) (risk per share = ${riskPerShare.toFixed(2)}).`;
      }
    } else if (type === 'longOption') {
      const premium = parseFloat(document.getElementById('optionPremium').value);
      if (premium > 0) {
        const contracts = Math.floor(RU / (premium * 100));
        result = `You can buy up to ${contracts} contract(s) (100 shares per contract).`;
      }
    } else if (type === 'spread') {
      const maxLoss = parseFloat(document.getElementById('spreadMaxLoss').value);
      if (maxLoss > 0) {
        const spreads = Math.floor(RU / maxLoss);
        result = `You can open up to ${spreads} spread contract(s).`;
      }
    } else if (type === 'condor') {
      const maxLoss = parseFloat(document.getElementById('condorMaxLoss').value);
      if (maxLoss > 0) {
        const condors = Math.floor(RU / maxLoss);
        result = `You can open up to ${condors} iron condor position(s).`;
      }
    }
    positionResultEl.textContent = result;
  }
</script>
</body>
</html>
