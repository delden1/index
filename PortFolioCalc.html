<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option Trade Position Sizer & Risk Analyzer</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --success-color: #27ae60;
            --danger-color: #c0392b;
            --light-bg: #ecf0f1;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--light-bg);
            color: var(--primary-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .dashboard-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-wrap: wrap;
        }

        /* --- Header --- */
        .header {
            width: 100%;
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .header h1 { margin: 0; font-size: 1.8rem; }
        .header p { margin: 10px 0 0 0; opacity: 0.8; font-size: 0.9rem; }

        /* --- Columns --- */
        .column {
            flex: 1 1 350px; /* Grow, shrink, min-basis */
            padding: 30px;
        }

        .input-column {
            border-right: 1px solid #eee;
            background-color: #fbfbfb;
        }

        /* --- Input Styling --- */
        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        .input-wrapper {
            position: relative;
        }

        .input-prefix {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
            font-weight: bold;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px 12px 12px 30px; /* Space for the $ prefix */
            border: 2px solid #bdc3c7;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
            box-sizing: border-box; /* Important for padding */
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* --- Output / Infographic Styling --- */
        .result-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }

        .result-card h3 {
            margin-top: 0;
            color: var(--secondary-color);
            font-size: 1.1rem;
            display: flex;
            justify-content: space-between;
        }

        .big-number {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .profit-text { color: var(--success-color); }
        .loss-text { color: var(--danger-color); }

        /* Visual Meters */
        .meter-container {
            height: 24px;
            background-color: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 15px;
            position: relative;
        }

        .meter-fill {
            height: 100%;
            width: 0%; /* Starting width */
            transition: width 0.5s ease-in-out;
            border-radius: 12px;
        }

        .meter-fill.profit { background: linear-gradient(90deg, var(--success-color), #2ecc71); }
        .meter-fill.loss { background: linear-gradient(90deg, var(--danger-color), #e74c3c); }

        .meter-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.85rem;
            font-weight: bold;
            color: #333;
            text-shadow: 0 0 2px rgba(255,255,255,0.8);
            white-space: nowrap;
        }

        .helper-text {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }

    </style>
</head>
<body>

<div class="dashboard-container">
    <div class="header">
        <h1>Interactive Option Position Sizer</h1>
        <p>Input your portfolio size and trade parameters to visualize risk and reward impact for scaling.</p>
    </div>

    <div class="column input-column">
        <div class="input-group">
            <label for="portfolioValue">Total Portfolio Value</label>
            <div class="input-wrapper">
                <span class="input-prefix">$</span>
                <input type="number" id="portfolioValue" placeholder="e.g., 100000" min="1">
            </div>
             <p class="helper-text">Your total current account equity.</p>
        </div>

        <div style="border-top: 2px dashed #ddd; margin: 30px 0;"></div>
        <h3>Proposed Trade Details</h3>

        <div class="input-group">
            <label for="maxProfit">Trade Max Potential Profit</label>
            <div class="input-wrapper">
                <span class="input-prefix">$</span>
                <input type="number" id="maxProfit" placeholder="e.g., 500" min="0">
            </div>
        </div>

        <div class="input-group">
            <label for="maxLoss">Trade Max Potential Loss (Risk)</label>
            <div class="input-wrapper">
                <span class="input-prefix">$</span>
                <input type="number" id="maxLoss" placeholder="e.g., 200" min="0">
            </div>
            <p class="helper-text">Crucial: The absolute most you can lose on this trade setup.</p>
        </div>
    </div>

    <div class="column output-column">
        
        <div class="result-card" style="border-left: 5px solid var(--danger-color);">
            <h3>
                Risk Impact (Portfolio % Loss)
                <span id="riskPercText" class="big-number loss-text">0.00%</span>
            </h3>
            <div class="meter-container">
                <div id="riskMeterFill" class="meter-fill loss"></div>
                <span id="riskMeterLabel" class="meter-label">0% of Portfolio</span>
            </div>
            <p class="helper-text">If this trade hits max loss, your total portfolio decreases by this amount.</p>
            <div>Adding this trade risks: <span id="riskCashText" class="loss-text bold">$0.00</span></div>
        </div>

        <div class="result-card" style="border-left: 5px solid var(--success-color);">
            <h3>
                Reward Impact (Portfolio % Gain)
                <span id="rewardPercText" class="big-number profit-text">0.00%</span>
            </h3>
            <div class="meter-container">
                <div id="rewardMeterFill" class="meter-fill profit"></div>
                <span id="rewardMeterLabel" class="meter-label">0% of Portfolio</span>
            </div>
            <p class="helper-text">If this trade hits max profit, your total portfolio grows by this amount.</p>
             <div>Adding this trade adds potentially: <span id="rewardCashText" class="profit-text bold">$0.00</span></div>
        </div>

        <div class="result-card" style="background-color: #f9f9f9;">
             <h3>Trade Risk/Reward Ratio</h3>
             <p style="font-size: 1.1rem;">For every $1 risked, you aim to make: <span id="rrRatioText" style="font-weight:bold;">$0.00</span></p>
         </div>

    </div>
</div>

<script>
    // 1. Select DOM Elements
    const portfolioInput = document.getElementById('portfolioValue');
    const maxProfitInput = document.getElementById('maxProfit');
    const maxLossInput = document.getElementById('maxLoss');

    const riskPercText = document.getElementById('riskPercText');
    const riskCashText = document.getElementById('riskCashText');
    const riskMeterFill = document.getElementById('riskMeterFill');
    const riskMeterLabel = document.getElementById('riskMeterLabel');

    const rewardPercText = document.getElementById('rewardPercText');
    const rewardCashText = document.getElementById('rewardCashText');
    const rewardMeterFill = document.getElementById('rewardMeterFill');
    const rewardMeterLabel = document.getElementById('rewardMeterLabel');
    
    const rrRatioText = document.getElementById('rrRatioText');

    // Helper function to format currency
    const formatCurrency = (num) => {
     return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(num);
    };

    // 2. Calculation Function
    function calculateOutputs() {
        // Get values, ensure they are numbers, default to 0 if empty or invalid
        let portValue = parseFloat(portfolioInput.value) || 0;
        let maxProfit = parseFloat(maxProfitInput.value) || 0;
        let maxLoss = parseFloat(maxLossInput.value) || 0;

        // Ensure non-negative values where appropriate for calculation logic
        portValue = Math.max(portValue, 0);
        maxProfit = Math.max(maxProfit, 0);
        maxLoss = Math.max(maxLoss, 0);

        let riskPercentage = 0;
        let rewardPercentage = 0;
        let rrRatio = 0;

        // Perform calculations if portfolio value exists to avoid division by zero
        if (portValue > 0) {
            riskPercentage = (maxLoss / portValue) * 100;
            rewardPercentage = (maxProfit / portValue) * 100;
        }
        
        if (maxLoss > 0) {
            rrRatio = maxProfit / maxLoss;
        }


        // 3. Update DOM UI

        // Update Text
        riskPercText.textContent = riskPercentage.toFixed(2) + '%';
        rewardPercText.textContent = rewardPercentage.toFixed(2) + '%';
        riskCashText.textContent = formatCurrency(maxLoss);
        rewardCashText.textContent = formatCurrency(maxProfit);
        rrRatioText.textContent = '$' + rrRatio.toFixed(2);

        // Update Visual Meters
        // Cap visual width at 100% so it doesn't overflow container visually, even if math is higher
        const visualRiskWidth = Math.min(riskPercentage, 100);
        const visualRewardWidth = Math.min(rewardPercentage, 100);

        riskMeterFill.style.width = visualRiskWidth + '%';
        rewardMeterFill.style.width = visualRewardWidth + '%';

        // Update Meter Labels used for very small percentages
        riskMeterLabel.textContent = riskPercentage.toFixed(1) + '% of Portfolio';
        rewardMeterLabel.textContent = rewardPercentage.toFixed(1) + '% of Portfolio';

        // Visual Warning: Make risk text bold and flash if over typical 2% threshold
        if (riskPercentage > 2.0) {
             riskPercText.style.fontWeight = '900';
             riskPercText.style.textDecoration = 'underline';
        } else {
             riskPercText.style.fontWeight = 'bold';
             riskPercText.style.textDecoration = 'none';
        }
    }

    // 3. Attach Event Listeners
    // We listen for 'input' events so it updates instantly as the user types
    portfolioInput.addEventListener('input', calculateOutputs);
    maxProfitInput.addEventListener('input', calculateOutputs);
    maxLossInput.addEventListener('input', calculateOutputs);

    // Run calculation once on load to initialize zeroes
    calculateOutputs();

</script>

</body>
</html>
